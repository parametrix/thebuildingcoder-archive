<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Building Coder</title>
    <link rel="stylesheet" href="bc.css">
    <link rel="stylesheet" href="google-code-prettify/prettify.css">
    <script src="google-code-prettify/run_prettify.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        a { color: #0066cc; }
        img { max-width: 100%; height: auto; }
        .nav { margin-bottom: 20px; padding: 10px; background: #f5f5f5; border-radius: 5px; }
        .nav a { margin-right: 15px; }
    </style>
</head>
<body>
    <div class="nav">
        <a href="index.html">← Back to Index</a>
    </div>
    <article>
<head>
<link rel="stylesheet" type="text/css" href="bc.css">
</head>

<h3>Voltage Units</h3>

<p>The last day before DevCamp!

<p>I am happy to note that the articles on 

<a href="0379_webcam_image.htm">
grabbing a webcam image</a> and

<a href="0380_revitwebcam.htm">
displaying it on a Revit element face</a> were 

so popular ... I will be demonstrating that and other samples using the 

<a href="0352_idling.htm">
Idling event</a> and

<a href="0353_asynchronous.htm">
modeless dialogues</a> at DevCamp.

<p>Meanwhile, here is an interesting little item that my colleagues Jorgen Dahl and Martin Schmid (who by the way published a 

<a href="http://www.amazon.com/exec/obidos/tg/detail/-/1439057664/ref=ord_cart_shr?_encoding=UTF8&m=ATVPDKIKX0DER&v=glance">
book on AutoCAD MEP 2010</a>)

dug up, another nugget of information on the topic of Revit database units, an area that we looked at repeatedly in the past:

<ul>
<li><a href="0011_units.htm">Units</a>.</li>
<li><a href="0046_format_unit.htm">Formatting unit strings</a>.</li>
<li><a href="0082_unit_type.htm">Unit types and format options</a>.</li>
<li><a href="0196_unit_conversion.htm">Unit conversion</a>.</li>
<li><a href="0226_unit_suffix.htm">Unit Suffix and the ProjectUnit SDK sample</a>.</li>
<li><a href="0227_dut_versus_ust.htm">DisplayUnitType and UnitSymbolType</a>.</li>
<li><a href="0267_filter_units.htm">Parameter filter units</a>.</li>
</ul>

<p>Martin is an expert in the MEP domain, so one area of interest to him is the following:

<p><strong>Question:</strong> What is the internal unit used by Revit for voltage?  
In the API, the ElectricalSystem.Voltage property returns a value that is about 10.76391 times the expected value in Volts, i.e., I get 1291.669 instead of 120 V.
The same applies to the TrueLoad property.
So I assume Revit is using some non-standard unit for voltage?

<p><strong>Answer:</strong> Electrical potential can be defined using the following more fundamental units:

<p>(Length<sup>2</sup> * Mass) / (Time<sup>3</sup> * Current).

<p>In Revit, this formula makes use of the following units:

<ul>
<li>Length: feet
<li>Mass: kg
<li>Time: s
<li>Current: A
</ul>

<p>The unit Volt is defined in the same way, of course, but uses the 

<a href="http://nostalgia.wikipedia.org/wiki/SI_unit">
SI unit</a> meters 

instead of feet, as specified by the International System of Units SI.

<p>As a result, to convert the Revit internal database voltage unit to Volts, you have to multiply it with 0.3048^2. 

<p>It would be nice to upgrade the internal Revit database unit to use meters as well, but the problem is that there are a lot of data fields on elements in Revit that don�t know if they are just a number or a length. 
We are working on it, though.

<p>Every unit in Revit knows what base units it is built of, and data is stored in that format. 
The base units used internally by Revit are currently:

<pre class="code">
<span class="blue">enum</span> <span class="teal">BaseUnit</span>
{
&nbsp; BU_Length = 0,&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="green">// length, feet (ft)</span>
&nbsp; BU_Angle,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="green">// angle, radian (rad)</span>
&nbsp; BU_Mass,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="green">// mass, kilogram (kg)</span>
&nbsp; BU_Time,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="green">// time, second (s)</span>
&nbsp; BU_Electric_Current,&nbsp;&nbsp; <span class="green">// electric current, ampere (A)</span>
&nbsp; BU_Temperature,&nbsp; &nbsp; &nbsp; &nbsp; <span class="green">// temperature, kelvin (K)</span>
&nbsp; BU_Luminous_Intensity, <span class="green">// luminous intensity, candela (cd)</span>
&nbsp; BU_Solid_Angle,&nbsp; &nbsp; &nbsp; &nbsp; <span class="green">// solid angle, steradian (sr)</span>
};
</pre>

<p>Many thanks to Jorgen and Martin for this useful background information!

    </article>
    <div class="nav">
        <a href="index.html">← Back to Index</a>
    </div>
</body>
</html>
